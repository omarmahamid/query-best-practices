# query-best-practices
Proof of concepts to use query filtration in DB level and not in application layer.


# Motivation

Here's another example that shows how relational algebra can be used to optimize a more complex query:

Suppose you have two tables: "orders" and "order_items". The "orders" table contains columns for "order_id", "customer_id", "order_date", and "order_total", while the "order_items" table contains columns for "order_id", "product_id", "quantity", and "price". You want to find the total revenue generated by each customer in the last month.

Using relational algebra, you can express this query as follows:

π customer_id, SUM(order_total * quantity * price) (
σ order_date >= '2022-02-01' and order_date < '2022-03-01' (
orders ⋈ orders.order_id = order_items.order_id
)
)

In this expression, ⋈ is the join operator, which combines the rows from the "orders" table and the "order_items" table based on their common "order_id" column. The selection operator σ filters the rows based on the order date, and the projection operator π returns only the customer ID and the calculated total revenue.

Relational algebra rules can then be applied to optimize this query, such as by pushing down the selection operator σ before the join operation, resulting in the following equivalent expression:

π customer_id, SUM(order_total * quantity * price) (
orders ⋈ orders.order_id = order_items.order_id
) σ order_date >= '2022-02-01' and order_date < '2022-03-01'

By pushing down the selection operator before the join operation, the database management system can reduce the amount of data that needs to be processed and improve query performance.

In summary, by using relational algebra to express and optimize complex queries, database administrators and developers can improve query performance and reduce the time required to execute complex queries.
